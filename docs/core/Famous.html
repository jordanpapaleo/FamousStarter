<!DOCTYPE html><html lang="en" class="no-js"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Famous | API Documentation | Platform | Famous</title><link href="http://fonts.googleapis.com/css?family=Roboto:400,300,500" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet" type="text/css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/zenburn.min.css"><link rel="stylesheet" href="../assets/styles/global.css"><link rel="stylesheet" href="../assets/styles/pages.css"><script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script></head><body><div class="component__body"><div class="component__heading"><p class="component__name">famous-core</p><p class="module__location"><a href="../core/Famous.html" target="_blank" class="module__location__link">core/Famous.js</a></p><h1 class="module__header">Famous</h1></div><div class="component__main"><div class="constructor__section"><h2 class="constructor__heading"><span class="constructor__name">Famous [constructor]&nbsp;</span></h2><p class="constructor__description"><p>Famous is the toplevel object being exposed as a singleton inside the Web
Worker. It holds a reference to a Clock, MessageQueue and triggers events
on the GlobalDispatch. Incoming messages being sent from the Main Thread
are defined by the following production rules (EBNF):</p>
<p>message = { commmand }
command = frame_command | with_command
frame_command = &quot;FRAME&quot;, unix_timestamp
with_command = selector, { action }
action = &quot;TRIGGER&quot;, event_type, event_object</p></p><pre class="constructor__example"><code>new Famous()</code></pre></div><div class="instance-methods__section"><h2 class="instance-methods__heading">Instance methods</h2><a name="step"></a><h3 class="instance-method__heading">.step(time)</h3><p class="instance-method__description"><p>Updates the internal Clock and flushes (clears and sends) the MessageQueue
to the Main Thread. step(time) is being called every time the Worker
receives a FRAME command.</p></p><h4 class="params__heading">Parameters:</h4><table class="table table-condensed params__table"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><span class="param__name">time</span></td><td><span class="param__type">Number</span></td><td><span class="param__description"><p>Unix timestamp</p></span></td></tr></tbody></table><a name="postMessage"></a><h3 class="instance-method__heading">.postMessage(message)</h3><p class="instance-method__description"><p>postMessage(message) is being called every time the Worker Thread receives a
message from the Main Thread. <code>postMessage</code> is being used as a method name
to expose the same API as an actual Worker would. This drastically reduces
the complexity of maintaining a workerless build.</p></p><h4 class="params__heading">Parameters:</h4><table class="table table-condensed params__table"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><span class="param__name">message</span></td><td><span class="param__type">Array</span></td><td><span class="param__description"><p>incoming message containing commands</p></span></td></tr></tbody></table><a name="handleFrame"></a><h3 class="instance-method__heading">.handleFrame(message)</h3><p class="instance-method__description"><p>Handles the FRAME command by removing FRAME and the unix timstamp from the
incoming message.</p></p><h4 class="params__heading">Parameters:</h4><table class="table table-condensed params__table"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><span class="param__name">message</span></td><td><span class="param__type">Array</span></td><td><span class="param__description"><p>message as received as a Worker message</p></span></td></tr></tbody></table><a name="handleWith"></a><h3 class="instance-method__heading">.handleWith(message)</h3><p class="instance-method__description"><p>Handles the WITH (and TRIGGER) command. Triggers the respective targeted
callbacks of the internal GlobalDispatch.</p></p><h4 class="params__heading">Parameters:</h4><table class="table table-condensed params__table"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><span class="param__name">message</span></td><td><span class="param__type">Array</span></td><td><span class="param__description"><p>message as received as a Worker message</p></span></td></tr></tbody></table><a name="onmessage"></a><h3 class="instance-method__heading">.onmessage()</h3><p class="instance-method__description"><p>Intended to be overridden by the ThreadManager to maintain compatibility
with the Web Worker API.</p></p><a name="getClock"></a><h3 class="instance-method__heading">.getClock()</h3><p class="instance-method__description"><p>Returns the internal Clock, which can be used to schedule updates on a
frame-by-frame basis.</p></p><a name="getMessageQueue"></a><h3 class="instance-method__heading">.getMessageQueue()</h3><p class="instance-method__description"><p>Returns the internal MessageQueue, which can be used to schedule messages
to be sent on the next tick.</p></p><a name="getGlobalDispatch"></a><h3 class="instance-method__heading">.getGlobalDispatch()</h3><p class="instance-method__description"><p>Returns the interal GlobalDispatch, which can be used to register event
listeners for global (same depth) or targeted (same path) events.</p></p></div><p class="copyright">Copyright 2015 &copy; Famous Industries, Inc.</p></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js" type="text/javascript"></script></body></html>